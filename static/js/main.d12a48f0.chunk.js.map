{"version":3,"sources":["constants.ts","url.ts","images/dog.svg","styles/breakpoints.ts","styles/colors.ts","components/Form.tsx","components/Error.tsx","api.ts","images/puff.svg","components/main-screen/Goal.tsx","components/TokenFetcher.tsx","components/main-screen/Card.tsx","components/main-screen/Info.tsx","components/main-screen/index.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["CLIENT_ID","CLIENT_SECRET","ACCESS_TOKEN","REFRESH_TOKEN","getTokensUrl","code","clientId","localStorage","getItem","clientSecret","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","fill","stroke","d","SvgDog","_ref","svgRef","title","titleId","props","id","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","media","mobile","small","tablet","desktop","cinema","dark1","grey1","white","red","Wrapper","styled","div","Doggy","Dog","Title","h1","FormWrapper","form","Input","input","ErrorText","span","visible","SubmitButton","button","Form","useForm","register","errors","handleSubmit","onSubmit","setItem","redirectUrl","window","location","href","authorizeUrl","name","type","inputMode","placeholder","required","Text","Error","children","JSON","stringify","getTokens","a","fetch","method","response","ok","json","data","access_token","refresh_token","athlete","firstname","lastname","refreshToken","url","getRuns","RUN","accessToken","headers","Authorization","runData","filter","fillRule","strokeWidth","cx","cy","r","attributeName","begin","dur","values","calcMode","keyTimes","keySplines","repeatCount","SvgPuff","width","height","Direction","Puffer","Puff","TryAgain","options","revalidateOnFocus","shouldRetryOnError","errorRetryCount","clearUrl","split","TokenFetcher","useSWR","error","onClick","setTimeout","Circle","direction","LEFT","RIGHT","Line","Info","totalDistanceKm","reduce","acc","curr","distance","totalDistance2Dp","Math","round","Number","EPSILON","CardWrapper","Content","InfoWrapper","formatData","entries","map","dataPoint","value","Card","runs","movingTime","moving_time","h","floor","m","elevationGain","total_elevation_gain","Goal","MainScreen","currentTime","useMemo","Date","now","tokenUrl","useCallback","refreshTokenUrl","activitiesUrl","getActivitiesUrl","refreshTokenError","runError","isValidating","App","URLSearchParams","search","get","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","GlobalStyle","createGlobalStyle","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d12a48f0.chunk.js","sourcesContent":["export const CLIENT_ID = 'cid';\nexport const CLIENT_SECRET = 'cs';\nexport const ACCESS_TOKEN = 'at';\nexport const REFRESH_TOKEN = 'rt';\nexport const FIRST_NAME = 'fn';\nexport const LAST_NAME = 'ln';\n","import {\n  CLIENT_ID,\n  CLIENT_SECRET,\n  REFRESH_TOKEN,\n  ACCESS_TOKEN,\n} from './constants';\n\ntype AuthorizeProps = {\n  clientId: string;\n  redirectUrl: string;\n};\n\n/**\n * Creates the URL to redirect the user to authorise this app\n */\nexport const authorizeUrl = ({\n  clientId,\n  redirectUrl,\n}: AuthorizeProps): string =>\n  `https://www.strava.com/api/v3/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUrl}&response_type=code&scope=activity:read_all`;\n\ntype GetTokensProps = {\n  code: string;\n};\n\n/**\n * Gets the initial refresh and access tokens when app is first authorised\n */\nexport const getTokensUrl = ({ code }: GetTokensProps): string => {\n  const clientId = localStorage.getItem(CLIENT_ID);\n  const clientSecret = localStorage.getItem(CLIENT_SECRET);\n\n  return `https://www.strava.com/api/v3/oauth/token?client_id=${clientId}&client_secret=${clientSecret}&code=${code}&grant_type=authorization_code`;\n};\n\n/**\n * Refreshes the access token.\n * Best to call before fetching activities to ensure the access token has not expired\n */\nexport const refreshTokenUrl = (): string => {\n  const clientId = localStorage.getItem(CLIENT_ID);\n  const clientSecret = localStorage.getItem(CLIENT_SECRET);\n  const refreshToken = localStorage.getItem(REFRESH_TOKEN);\n\n  return `https://www.strava.com/api/v3/oauth/token?client_id=${clientId}&client_secret=${clientSecret}&refresh_token=${refreshToken}&grant_type=refresh_token`;\n};\n\n/**\n * Gets all activities logged in Strava for the year 2021.\n * This includes all non running activities.\n * Page limit set to 200 as that seems to be the maximum\n */\nexport const getActivitiesUrl = (currentTime: number): string => {\n  const accessToken = localStorage.getItem(ACCESS_TOKEN);\n\n  //  January 1, 2021 12:00:00 AM\n  const startOfYear = 1609459200;\n\n  // Setting to 200 activities per call. Seems to be the max amount\n  // Look into pagination when I've done over 200 activities in a year\n  return `https://www.strava.com/api/v3/athlete/activities?access_token=${accessToken}&before=${currentTime}&after=${startOfYear}&per_page=200`;\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"current\",\n  stroke: \"current\",\n  d: \"M534.166,180.916c-2.326-11.044-23.832-26.157-34.876-30.804c0,0-2.905-7.556-9.882-10.461 c-6.977-2.905-15.696-31.387-15.112,3.488c0,0-19.181-9.881-28.482-9.881c0,0-7.557,13.37,0,27.899c0,0-13.37,5.814-34.293,15.691 c-20.926,9.882-66.843,8.14-113.342-10.461c-46.5-18.601-97.651-19.764-127.292,5.814c0,0-41.849,9.882-52.894,23.252 c-11.044,13.37-73.819,30.225-99.393-16.275c-25.574-46.5-20.343,18.017-10.461,32.55c9.882,14.533,44.174,79.05,134.848,18.601 c0,0,6.394,38.364,36.039,49.988c29.646,11.624,29.646,48.825,27.32,56.961s2.905,40.686,0,49.988 c-2.905,9.299,19.18,25.573,24.411,55.219c0,0-0.579,15.691,13.37,0c0,0,2.905,6.394,11.624,2.325c0,0,13.37,6.394,15.692-5.813 c2.325-12.207,2.325-16.275-10.461-24.994s-43.595-47.662-19.764-68.589c23.832-20.927,28.483-26.157,28.483-53.477 c0,0,44.174,9.882,51.731,28.482c0,0-3.489,31.388-5.23,36.618c-1.742,5.23-41.85,7.556-52.894,35.455c0,0,0.58,6.977,5.814,6.394 c0,0,2.326,11.044,8.136,6.977c5.81-4.067,24.994-18.601,44.758-18.018c19.764,0.58,17.438-16.274,20.927-22.089 c3.488-5.813,9.298-22.668,9.298-24.994c0,0,15.691,17.438,14.533,26.736c-1.163,9.298-6.977,8.14-13.37,9.298 c-6.394,1.159-20.927,12.787-18.601,18.018c0,0-12.787,15.112-4.651,15.112s30.804-6.977,38.943-14.532 c8.136-7.557,26.736-7.557,25.573-24.411c-1.162-16.854-3.488-36.039-3.488-36.039s65.68-30.804,87.186-61.028 s29.646-38.364,50.567-33.129c20.923,5.234,24.411-1.742,24.411-1.742s26.156-15.112,21.506-27.32 C574.855,211.72,536.491,191.957,534.166,180.916z\"\n});\n\nfunction SvgDog(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 575.401 575.402\",\n    style: {\n      enableBackground: \"new 0 0 100% 100%\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDog);\nexport default __webpack_public_path__ + \"static/media/dog.a2d5045a.svg\";\nexport { ForwardRef as ReactComponent };","const small = 768;\nconst medium = 1024;\nconst large = 1440;\n\nexport const media = {\n  mobile: `(max-width: ${small - 1}px)`,\n  tablet: `(min-width: ${small}px)`,\n  desktop: `(min-width: ${medium}px)`,\n  cinema: `(min-width: ${large}px)`,\n};\n","export const dark1 = '#060A0F';\nexport const dark2 = '#0D1117';\nexport const grey1 = '#C9D1D9';\nexport const white = '#FFFFFF';\nexport const red = '#F85149';\n","import type { FC } from 'react';\nimport styled from 'styled-components';\nimport { useForm } from 'react-hook-form';\nimport { authorizeUrl } from '../url';\nimport { ReactComponent as Dog } from '../images/dog.svg';\nimport { media } from '../styles/breakpoints';\nimport { white, dark1, dark2, grey1, red } from '../styles/colors';\nimport { CLIENT_ID, CLIENT_SECRET } from '../constants';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Doggy = styled(Dog)`\n  fill: ${white};\n  stroke: ${grey1};\n  width: 200px;\n  margin-top: 40px;\n\n  @media ${media.cinema} {\n    width: 12.5vw;\n    margin-top: 2.5vw;\n  }\n`;\n\nconst Title = styled.h1`\n  color: ${white};\n  font-size: 40px;\n  margin: 0;\n  margin-top: -30px; /* To negate the height of the svg */\n  text-align: center;\n\n  @media ${media.cinema} {\n    font-size: 2.5vw;\n    margin-top: -1.875vw;\n  }\n`;\n\nconst FormWrapper = styled.form`\n  display: flex;\n  flex-direction: column;\n  width: calc(100% - 60px); /* Margin of 30px on each side */\n  box-sizing: border-box;\n  margin-top: 40px;\n\n  @media ${media.tablet} {\n    width: 400px;\n  }\n\n  @media ${media.cinema} {\n    width: 25vw;\n    margin-top: 2.5vw;\n  }\n`;\n\nconst Input = styled.input`\n  padding: 0;\n  margin: 0;\n  border: ${grey1} 1px solid;\n  border-radius: 2px;\n  background-color: ${dark2};\n  color: ${grey1};\n  color: ${white};\n  height: 40px;\n  margin-bottom: 2px;\n  padding-left: 20px;\n  font-size: 16px;\n  font-family: inherit;\n\n  &:focus {\n    outline: none;\n    border: ${white} 1px solid;\n  }\n\n  // Hide the number arrows in the number field\n  /* Chrome, Safari, Edge, Opera */\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  /* Firefox */\n  &[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  @media ${media.cinema} {\n    border: ${grey1} 0.0625vw solid;\n    border-radius: 0.125vw;\n    height: 2.5vw;\n    margin-bottom: 0.125vw;\n    padding-left: 1.25vw;\n    font-size: 1vw;\n\n    &:focus {\n      border: ${white} 0.0625vw solid;\n    }\n  }\n`;\n\nconst ErrorText = styled.span<{ visible: boolean }>`\n  visibility: ${({ visible }) => (visible ? 'visible' : 'hidden')};\n  color: ${red};\n  font-size: 14px;\n  margin-bottom: 10px;\n\n  @media ${media.cinema} {\n    font-size: 0.875vw;\n    margin-bottom: 0.625vw;\n  }\n`;\n\nconst SubmitButton = styled.button`\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n  height: 40px;\n  border: none;\n  border-radius: 2px;\n  background-color: ${white};\n  color: ${dark1};\n  font-size: 16px;\n  font-weight: bold;\n  font-family: inherit;\n\n  @media ${media.cinema} {\n    height: 2.5vw;\n    border-radius: 0.125vw;\n    font-size: 1vw;\n  }\n`;\n\ntype FormValues = {\n  clientId: string;\n  clientSecret: string;\n};\n\nconst Form: FC = () => {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  const { register, errors, handleSubmit } = useForm<FormValues>();\n\n  const onSubmit = ({ clientId, clientSecret }: FormValues) => {\n    localStorage.setItem(CLIENT_ID, clientId);\n    localStorage.setItem(CLIENT_SECRET, clientSecret);\n\n    const redirectUrl = window.location.href;\n\n    window.location.href = authorizeUrl({ clientId, redirectUrl });\n  };\n\n  return (\n    <Wrapper>\n      <div>\n        <Doggy />\n        <Title>Run Goal</Title>\n      </div>\n      <FormWrapper onSubmit={handleSubmit(onSubmit)}>\n        <Input\n          name=\"clientId\"\n          type=\"number\"\n          inputMode=\"numeric\"\n          placeholder=\"Client Id\"\n          ref={register({ required: true })}\n        />\n        <ErrorText visible={!!errors.clientId}>\n          Please enter a Client Id\n        </ErrorText>\n\n        <Input\n          name=\"clientSecret\"\n          type=\"password\"\n          placeholder=\"Client Secret\"\n          ref={register({ required: true })}\n        />\n        <ErrorText visible={!!errors.clientSecret}>\n          Please enter a Client Secret\n        </ErrorText>\n\n        <SubmitButton type=\"submit\">Submit</SubmitButton>\n      </FormWrapper>\n    </Wrapper>\n  );\n};\n\nexport default Form;\n","import type { FC, ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { media } from '../styles/breakpoints';\nimport { red } from '../styles/colors';\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: calc(100% - 60px); /* Margin of 30px on each side */\n  box-sizing: border-box;\n  margin: 40px auto;\n  border: ${red} 1px solid;\n  border-radius: 5px;\n\n  @media ${media.tablet} {\n    width: 750px;\n  }\n\n  @media ${media.cinema} {\n    width: 50vw;\n    margin: 2.5vw auto;\n    border: ${red} 0.0625vw solid;\n    border-radius: 0.3125vw;\n  }\n`;\n\nconst Text = styled.span`\n  color: ${red};\n  font-size: 20px;\n  margin: 0;\n  text-align: center;\n  padding: 20px;\n  word-break: break-word;\n\n  @media ${media.cinema} {\n    font-size: 1.75vw;\n    padding: 1.25vw;\n  }\n`;\n\ntype ErrorProps = {\n  children: ReactNode;\n};\n\nconst Error: FC<ErrorProps> = ({ children }) => (\n  <Wrapper>\n    <Text>{JSON.stringify(children)}</Text>\n  </Wrapper>\n);\n\nexport default Error;\n","import { getTokensUrl } from './url';\nimport { Authorize, Refresh, Activity } from './types';\nimport {\n  ACCESS_TOKEN,\n  REFRESH_TOKEN,\n  FIRST_NAME,\n  LAST_NAME,\n} from './constants';\n\ntype Token = (code: string) => Promise<Error | true>;\n\n/**\n * Fetch initial user access token, refresh token, first name and last name\n * then store in local storage.\n * Once completed, clear url and push user to home\n */\nexport const getTokens: Token = async (code: string) => {\n  const response = await fetch(getTokensUrl({ code }), {\n    method: 'POST',\n  });\n\n  if (!response.ok) {\n    const error: Error = await response.json();\n\n    throw error;\n  }\n\n  const data: Authorize = await response.json();\n  const {\n    access_token,\n    refresh_token,\n    athlete: { firstname, lastname },\n  } = data;\n\n  access_token && localStorage.setItem(ACCESS_TOKEN, access_token);\n  refresh_token && localStorage.setItem(REFRESH_TOKEN, refresh_token);\n  firstname && localStorage.setItem(FIRST_NAME, firstname);\n  lastname && localStorage.setItem(LAST_NAME, lastname);\n\n  return true;\n};\n\ntype RefreshToken = (url: string) => Promise<Error | true>;\n\n/**\n * Refresh the access token and store in local storage\n */\nexport const refreshToken: RefreshToken = async (url: string) => {\n  const response = await fetch(url, {\n    method: 'POST',\n  });\n\n  if (!response.ok) {\n    const error: Error = await response.json();\n\n    throw error;\n  }\n\n  // Add data type\n  const data: Refresh = await response.json();\n  const { access_token } = data;\n\n  access_token && localStorage.setItem(ACCESS_TOKEN, access_token);\n\n  return true;\n};\n\ntype Runs = (url: string) => Promise<Activity[]>;\n\n/**\n * Return an array of Run activities\n */\nexport const getRuns: Runs = async (url: string) => {\n  const RUN = 'Run';\n  const accessToken = localStorage.getItem(ACCESS_TOKEN);\n\n  const response = await fetch(url, {\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n    },\n  });\n\n  if (!response.ok) {\n    const error: Error = await response.json();\n\n    throw error;\n  }\n\n  const data: Activity[] = await response.json();\n\n  // Filter out all non run activities\n  const runData = data?.filter(({ type }: { type: string }) => type === RUN);\n\n  return runData;\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  strokeWidth: 2\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 22,\n  cy: 22,\n  r: 1\n}, /*#__PURE__*/React.createElement(\"animate\", {\n  attributeName: \"r\",\n  begin: \"0s\",\n  dur: \"1.8s\",\n  values: \"1; 20\",\n  calcMode: \"spline\",\n  keyTimes: \"0; 1\",\n  keySplines: \"0.165, 0.84, 0.44, 1\",\n  repeatCount: \"indefinite\"\n}), /*#__PURE__*/React.createElement(\"animate\", {\n  attributeName: \"stroke-opacity\",\n  begin: \"0s\",\n  dur: \"1.8s\",\n  values: \"1; 0\",\n  calcMode: \"spline\",\n  keyTimes: \"0; 1\",\n  keySplines: \"0.3, 0.61, 0.355, 1\",\n  repeatCount: \"indefinite\"\n})), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 22,\n  cy: 22,\n  r: 1\n}, /*#__PURE__*/React.createElement(\"animate\", {\n  attributeName: \"r\",\n  begin: \"-0.9s\",\n  dur: \"1.8s\",\n  values: \"1; 20\",\n  calcMode: \"spline\",\n  keyTimes: \"0; 1\",\n  keySplines: \"0.165, 0.84, 0.44, 1\",\n  repeatCount: \"indefinite\"\n}), /*#__PURE__*/React.createElement(\"animate\", {\n  attributeName: \"stroke-opacity\",\n  begin: \"-0.9s\",\n  dur: \"1.8s\",\n  values: \"1; 0\",\n  calcMode: \"spline\",\n  keyTimes: \"0; 1\",\n  keySplines: \"0.3, 0.61, 0.355, 1\",\n  repeatCount: \"indefinite\"\n})));\n\nfunction SvgPuff(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 44,\n    height: 44,\n    viewBox: \"0 0 44 44\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    stroke: \"#fff\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPuff);\nexport default __webpack_public_path__ + \"static/media/puff.be69e7a9.svg\";\nexport { ForwardRef as ReactComponent };","import type { FC } from 'react';\nimport styled from 'styled-components';\nimport type { Activity } from '../../types/activity';\nimport { media } from '../../styles/breakpoints';\nimport { grey1 } from '../../styles/colors';\n\nconst Circle = styled.div`\n  height: 300px;\n  width: 300px;\n  margin-top: 100px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: ${grey1} 5px solid;\n  border-radius: 50%;\n\n  @media ${media.cinema} {\n    height: 18.75vw;\n    width: 18.75vw;\n    margin-top: 6.25vw;\n    border: ${grey1} 0.3125vw solid;\n  }\n`;\n\nenum Direction {\n  LEFT,\n  RIGHT,\n}\n\ntype TextProps = {\n  direction: Direction;\n};\n\nconst Text = styled.span<TextProps>`\n  color: ${grey1};\n  font-size: 28px;\n  font-weight: bold;\n  padding-left: ${({ direction }) => direction === Direction.LEFT && '90px'};\n  padding-right: ${({ direction }) => direction === Direction.RIGHT && '90px'};\n\n  @media ${media.cinema} {\n    font-size: 1.75vw;\n    padding-left: ${({ direction }) =>\n      direction === Direction.LEFT && '5.625vw'};\n    padding-right: ${({ direction }) =>\n      direction === Direction.RIGHT && '5.625vw'};\n  }\n`;\n\nconst Line = styled.div`\n  position: absolute;\n  height: 80px;\n  border-right: ${grey1} 5px solid;\n  transform: skew(-45deg);\n\n  @media ${media.cinema} {\n    height: 5vw;\n    border-right: ${grey1} 0.3125vw solid;\n  }\n`;\n\ntype InfoProps = {\n  runData: Activity[];\n};\n\nconst Info: FC<InfoProps> = ({ runData }) => {\n  const totalDistanceKm =\n    runData?.reduce((acc, curr) => acc + curr.distance, 0) / 10;\n\n  const totalDistance2Dp =\n    Math.round(totalDistanceKm + Number.EPSILON * 100) / 100;\n\n  return (\n    <Circle>\n      <Text direction={Direction.RIGHT}>{totalDistance2Dp}</Text>\n      <Line />\n      <Text direction={Direction.LEFT}>1000</Text>\n    </Circle>\n  );\n};\n\nexport default Info;\n","import type { FC } from 'react';\nimport styled from 'styled-components';\nimport useSWR from 'swr';\nimport Error from './Error';\nimport { getTokens } from '../api';\nimport { ReactComponent as Puff } from '../images/puff.svg';\nimport { media } from '../styles/breakpoints';\nimport { white, dark1 } from '../styles/colors';\nimport { getTokensUrl } from '../url';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Puffer = styled(Puff)`\n  width: 150px;\n  height: 150px;\n  margin-top: 100px;\n\n  @media ${media.cinema} {\n    width: 9.375vw;\n    height: 9.375vw;\n    margin-top: 6.25vw;\n  }\n`;\n\nconst Text = styled.span`\n  color: ${white};\n  font-size: 28px;\n  margin: 0;\n  margin-top: 50px;\n  text-align: center;\n\n  @media ${media.cinema} {\n    font-size: 1.75vw;\n    margin-top: 3.125vw;\n  }\n`;\n\nconst TryAgain = styled.button`\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n  height: 40px;\n  border: none;\n  border-radius: 2px;\n  background-color: ${white};\n  color: ${dark1};\n  font-size: 16px;\n  font-weight: bold;\n  font-family: inherit;\n  width: 150px;\n\n  @media ${media.cinema} {\n    height: 2.5vw;\n    border-radius: 0.125vw;\n    font-size: 1vw;\n    width: 9.375vw;\n  }\n`;\n\ntype Props = {\n  code: string;\n};\n\nconst options = {\n  revalidateOnFocus: false,\n  shouldRetryOnError: false,\n  errorRetryCount: 0,\n};\n\nconst clearUrl = () => {\n  const url = window.location.href;\n  window.location.href = url.split('?')[0];\n};\n\nconst TokenFetcher: FC<Props> = ({ code }) => {\n  const url = getTokensUrl({ code });\n  const { data, error } = useSWR(url, getTokens, options);\n\n  if (error) {\n    return (\n      <Wrapper>\n        <Error>{error}</Error>\n        <TryAgain onClick={clearUrl}>Try again</TryAgain>\n      </Wrapper>\n    );\n  }\n\n  if (data) {\n    // Redirect after three seconds. The redirect occurs too quickly otherwise\n    setTimeout(() => clearUrl(), 3000);\n  }\n\n  return (\n    <Wrapper>\n      <Puffer />\n      <Text>Linking account...</Text>\n      {data && <Text>Success!</Text>}\n    </Wrapper>\n  );\n};\n\nexport default TokenFetcher;\n","import type { FC, ReactText } from 'react';\nimport styled from 'styled-components';\nimport { media } from '../../styles/breakpoints';\nimport { grey1 } from '../../styles/colors';\n\nconst CardWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  width: 300px;\n  margin-top: 60px;\n  border: 1px solid ${grey1};\n  border-radius: 3px;\n\n  @media ${media.cinema} {\n    width: 18.75vw;\n    margin-top: 3.75vw;\n    border: 0.0625vw solid ${grey1};\n    border-radius: 0.1875vw;\n  }\n`;\n\nconst Title = styled.span`\n  color: ${grey1};\n  border-bottom: 1px solid ${grey1};\n  padding: 10px;\n  font-size: 16px;\n  font-weight: bold;\n\n  @media ${media.cinema} {\n    border-bottom: 0.0625vw solid ${grey1};\n    padding: 0.625vw;\n    font-size: 1vw;\n  }\n`;\n\nconst Content = styled.div`\n  color: ${grey1};\n  padding: 10px;\n  font-size: 14px;\n\n  @media ${media.cinema} {\n    padding: 0.625vw;\n    font-size: 1vw;\n  }\n`;\n\nconst InfoWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 3px;\n\n  @media ${media.cinema} {\n    margin-bottom: 0.1875vw;\n  }\n`;\n\ninterface Data {\n  [key: string]: ReactText;\n}\n\nconst formatData = (data: Data) =>\n  Object.entries(data).map((dataPoint) => {\n    const [name, value] = dataPoint;\n\n    return (\n      <InfoWrapper key={name}>\n        <span>{name}</span>\n        <span>{value}</span>\n      </InfoWrapper>\n    );\n  });\n\ntype CardProps = {\n  title: string;\n  data: Data;\n};\n\nconst Card: FC<CardProps> = ({ title, data }) => (\n  <CardWrapper>\n    <Title>{title}</Title>\n    <Content>{formatData(data)}</Content>\n  </CardWrapper>\n);\n\nexport default Card;\n","import type { FC } from 'react';\nimport type { Activity } from '../../types/activity';\nimport Goal from './Goal';\nimport Card from './Card';\n\ntype InfoProps = {\n  runData: Activity[];\n};\n\nconst Info: FC<InfoProps> = ({ runData }) => {\n  const runs = runData.length;\n  const movingTime = runData.reduce(\n    (acc, { moving_time }) => acc + moving_time,\n    0,\n  );\n\n  const h = Math.floor(movingTime / 3600);\n  const m = Math.floor((movingTime % 3600) / 60);\n\n  const elevationGain = runData.reduce(\n    (acc, { total_elevation_gain }) => acc + total_elevation_gain,\n    0,\n  );\n\n  return (\n    <>\n      <Goal runData={runData} />\n      <Card\n        title=\"Year To Date\"\n        data={{\n          'Runs': runs,\n          'Time': `${h}h ${m}m`,\n          'Elevation Gain': `${elevationGain}m`,\n        }}\n      />\n    </>\n  );\n};\n\nexport default Info;\n","import { FC, useMemo, useCallback } from 'react';\nimport styled from 'styled-components';\nimport useSWR from 'swr';\nimport Error from '../Error';\nimport Info from './Info';\nimport { refreshToken, getRuns } from '../../api';\nimport { ReactComponent as Puff } from '../../images/puff.svg';\nimport { media } from '../../styles/breakpoints';\nimport { refreshTokenUrl, getActivitiesUrl } from '../../url';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Puffer = styled(Puff)`\n  width: 150px;\n  height: 150px;\n  margin-top: 100px;\n\n  @media ${media.cinema} {\n    width: 9.375vw;\n    height: 9.375vw;\n    margin-top: 6.25vw;\n  }\n`;\n\n// SWR options\nconst options = {\n  revalidateOnFocus: false,\n  errorRetryCount: 3,\n};\n\nconst MainScreen: FC = () => {\n  // The date needed to be memoized as /activities kept getting called as\n  // the date updated\n  // Current time - convert to seconds. Strava does not seem to accept milliseconds\n  const currentTime = useMemo(() => Math.floor(Date.now() / 1000), []);\n\n  const tokenUrl = useCallback(() => refreshTokenUrl(), []);\n  const activitiesUrl = useCallback(() => getActivitiesUrl(currentTime), []);\n\n  const { error: refreshTokenError } = useSWR(tokenUrl, refreshToken, options);\n\n  const { data: runData = [], error: runError, isValidating } = useSWR(\n    activitiesUrl,\n    getRuns,\n    options,\n  );\n\n  if (refreshTokenError) {\n    return <Error>{refreshTokenError}</Error>;\n  }\n\n  if (runError) {\n    return <Error>{runError}</Error>;\n  }\n\n  if (isValidating) {\n    return (\n      <Wrapper>\n        <Puffer />\n      </Wrapper>\n    );\n  }\n\n  return (\n    <Wrapper>\n      <Info runData={runData} />\n    </Wrapper>\n  );\n};\n\nexport default MainScreen;\n","import type { FC } from 'react';\nimport Form from './Form';\nimport TokenFetcher from './TokenFetcher';\nimport MainScreen from './main-screen';\nimport { REFRESH_TOKEN } from '../constants';\n\nconst getCodeParam = () => {\n  const urlParams = new URLSearchParams(window.location.search);\n  const codeParam = urlParams.get('code');\n\n  return codeParam;\n};\n\nconst App: FC = () => {\n  const code = getCodeParam();\n  const refreshToken = localStorage.getItem(REFRESH_TOKEN);\n\n  return refreshToken ? (\n    <MainScreen />\n  ) : code ? (\n    <TokenFetcher code={code} />\n  ) : (\n    <Form />\n  );\n};\n\nexport default App;\n","/* eslint-disable promise/always-return */\n/* eslint-disable promise/catch-or-return */\n/* eslint-disable @typescript-eslint/no-floating-promises */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createGlobalStyle } from 'styled-components';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { dark1 } from './styles/colors';\n\nconst GlobalStyle = createGlobalStyle`\n  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap');\n\n  body {\n    margin: 0;\n    font-family: 'Poppins', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background-color: ${dark1};\n  }\n`;\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyle />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}