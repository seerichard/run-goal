(this["webpackJsonprun-goal"]=this["webpackJsonprun-goal"]||[]).push([[0],{26:function(e,t,n){"use strict";n.r(t);var r=n(12),i=n(1),o=n(0),c=n.n(o),a=n(13),l=n.n(a),s=n(3),d=n(17),p=function(e){var t=e.clientId,n=e.clientSecret,r=e.code;return"https://www.strava.com/oauth/token?client_id=".concat(t,"&client_secret=").concat(n,"&code=").concat(r,"&grant_type=authorization_code")},u=function(e){var t=e.clientId,n=e.clientSecret,r=e.refreshToken;return"https://www.strava.com/oauth/token?client_id=".concat(t,"&client_secret=").concat(n,"&refresh_token=").concat(r,"&grant_type=refresh_token")},m=function(e){var t=e.accessToken,n=Date.now()/1e3;return"https://www.strava.com/api/v3/athlete/activities?access_token=".concat(t,"&before=").concat(n,"&after=").concat(1609459200,"&per_page=200")};function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var g=o.createElement("path",{fill:"current",stroke:"current",d:"M534.166,180.916c-2.326-11.044-23.832-26.157-34.876-30.804c0,0-2.905-7.556-9.882-10.461 c-6.977-2.905-15.696-31.387-15.112,3.488c0,0-19.181-9.881-28.482-9.881c0,0-7.557,13.37,0,27.899c0,0-13.37,5.814-34.293,15.691 c-20.926,9.882-66.843,8.14-113.342-10.461c-46.5-18.601-97.651-19.764-127.292,5.814c0,0-41.849,9.882-52.894,23.252 c-11.044,13.37-73.819,30.225-99.393-16.275c-25.574-46.5-20.343,18.017-10.461,32.55c9.882,14.533,44.174,79.05,134.848,18.601 c0,0,6.394,38.364,36.039,49.988c29.646,11.624,29.646,48.825,27.32,56.961s2.905,40.686,0,49.988 c-2.905,9.299,19.18,25.573,24.411,55.219c0,0-0.579,15.691,13.37,0c0,0,2.905,6.394,11.624,2.325c0,0,13.37,6.394,15.692-5.813 c2.325-12.207,2.325-16.275-10.461-24.994s-43.595-47.662-19.764-68.589c23.832-20.927,28.483-26.157,28.483-53.477 c0,0,44.174,9.882,51.731,28.482c0,0-3.489,31.388-5.23,36.618c-1.742,5.23-41.85,7.556-52.894,35.455c0,0,0.58,6.977,5.814,6.394 c0,0,2.326,11.044,8.136,6.977c5.81-4.067,24.994-18.601,44.758-18.018c19.764,0.58,17.438-16.274,20.927-22.089 c3.488-5.813,9.298-22.668,9.298-24.994c0,0,15.691,17.438,14.533,26.736c-1.163,9.298-6.977,8.14-13.37,9.298 c-6.394,1.159-20.927,12.787-18.601,18.018c0,0-12.787,15.112-4.651,15.112s30.804-6.977,38.943-14.532 c8.136-7.557,26.736-7.557,25.573-24.411c-1.162-16.854-3.488-36.039-3.488-36.039s65.68-30.804,87.186-61.028 s29.646-38.364,50.567-33.129c20.923,5.234,24.411-1.742,24.411-1.742s26.156-15.112,21.506-27.32 C574.855,211.72,536.491,191.957,534.166,180.916z"});function b(e,t){var n=e.title,r=e.titleId,i=h(e,["title","titleId"]);return o.createElement("svg",f({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 575.401 575.402",style:{enableBackground:"new 0 0 100% 100%"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,g)}var w=o.forwardRef(b),x=(n.p,{mobile:"(max-width: ".concat(767,"px)"),tablet:"(min-width: ".concat(768,"px)"),desktop:"(min-width: ".concat(1024,"px)"),cinema:"(min-width: ".concat(1440,"px)")}),v="#060A0F",y="#C9D1D9",j="#FFFFFF",O="cid",S="cs",I="at",k="rt",_=s.b.div.withConfig({displayName:"Form__Wrapper",componentId:"sc-1d1wlh-0"})(["display:flex;flex-direction:column;align-items:center;"]),C=Object(s.b)(w).withConfig({displayName:"Form__Doggy",componentId:"sc-1d1wlh-1"})(["fill:",";stroke:",";width:200px;margin-top:40px;@media ","{width:12.5vw;margin-top:2.5vw;}"],j,y,x.cinema),T=s.b.h1.withConfig({displayName:"Form__Title",componentId:"sc-1d1wlh-2"})(["color:",";font-size:40px;margin:0;margin-top:-30px;text-align:center;@media ","{font-size:2.5vw;margin-top:-1.875vw;}"],j,x.cinema),F=s.b.form.withConfig({displayName:"Form__FormWrapper",componentId:"sc-1d1wlh-3"})(["display:flex;flex-direction:column;width:calc(100% - 60px);box-sizing:border-box;margin-top:40px;@media ","{width:400px;}@media ","{width:25vw;margin-top:2.5vw;}"],x.tablet,x.cinema),E=s.b.input.withConfig({displayName:"Form__Input",componentId:"sc-1d1wlh-4"})(["padding:0;margin:0;border:"," 1px solid;border-radius:2px;background-color:",";color:",";color:",";height:40px;margin-bottom:15px;padding-left:20px;font-size:16px;font-family:inherit;&:focus{outline:none;border:"," 1px solid;}&::-webkit-outer-spin-button,&::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}&[type='number']{-moz-appearance:textfield;}@media ","{border:"," 0.0625vw solid;border-radius:0.125vw;height:2.5vw;margin-bottom:0.9375vw;padding-left:1.25vw;font-size:1vw;&:focus{border:"," 0.0625vw solid;}}"],y,"#0D1117",y,j,j,x.cinema,y,j),N=s.b.button.withConfig({displayName:"Form__SubmitButton",componentId:"sc-1d1wlh-5"})(["cursor:pointer;padding:0;margin:0;height:40px;border:none;border-radius:2px;background-color:",";color:",";font-size:16px;font-weight:bold;font-family:inherit;@media ","{height:2.5vw;border-radius:0.125vw;font-size:1vw;}"],j,v,x.cinema),P=function(){var e=Object(d.a)(),t=e.register,n=e.errors,r=e.handleSubmit;return Object(i.jsxs)(_,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(C,{}),Object(i.jsx)(T,{children:"Run Goal"})]}),Object(i.jsxs)(F,{onSubmit:r((function(e){var t=e.clientId,n=e.clientSecret;localStorage.setItem(O,t),localStorage.setItem(S,n);var r=window.location.href;window.location.href=function(e){var t=e.clientId,n=e.redirectUrl;return"https://www.strava.com/oauth/authorize?client_id=".concat(t,"&redirect_uri=").concat(n,"&response_type=code&scope=activity:read_all")}({clientId:t,redirectUrl:r})})),children:[Object(i.jsx)(E,{name:"clientId",type:"number",inputMode:"numeric",placeholder:"Client Id",ref:t({required:!0})}),n.clientId&&"Please enter a Client Id",Object(i.jsx)(E,{name:"clientSecret",type:"password",placeholder:"Client Secret",ref:t({required:!0})}),n.clientSecret&&"Please enter a Client Secret",Object(i.jsx)(N,{type:"submit",children:"Submit"})]})]})},z=n(2),M=n.n(z),R=n(4),L=function(){var e=Object(R.a)(M.a.mark((function e(t){var n,r,i,o,c,a,l,s,d,u;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(O),r=localStorage.getItem(S),e.next=4,fetch(p({clientId:n,clientSecret:r,code:t}),{method:"POST"});case 4:return i=e.sent,e.next=7,i.json();case 7:o=e.sent,c=o.access_token,a=o.refresh_token,l=o.athlete,s=l.firstname,d=l.lastname,localStorage.setItem(I,c),localStorage.setItem(k,a),localStorage.setItem("fn",s),localStorage.setItem("ln",d),u=window.location.href,window.location.href=u.split("?")[0];case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(R.a)(M.a.mark((function e(){var t,n,r,i,o,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(O),n=localStorage.getItem(S),r=localStorage.getItem(k),e.next=5,fetch(u({clientId:t,clientSecret:n,refreshToken:r}),{method:"POST"});case 5:return i=e.sent,e.next=8,i.json();case 8:o=e.sent,c=o.access_token,localStorage.setItem(I,c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(R.a)(M.a.mark((function e(){var t,n,r,i,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(I),n="Run",e.next=4,fetch(m({accessToken:t}));case 4:return r=e.sent,e.next=7,r.json();case 7:return i=e.sent,o=i.filter((function(e){return e.type===n})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var H=o.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:2},o.createElement("circle",{cx:22,cy:22,r:1},o.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),o.createElement("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})),o.createElement("circle",{cx:22,cy:22,r:1},o.createElement("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),o.createElement("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})));function U(e,t){var n=e.title,r=e.titleId,i=G(e,["title","titleId"]);return o.createElement("svg",B({width:44,height:44,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,H)}var W,J=o.forwardRef(U),A=(n.p,s.b.div.withConfig({displayName:"TokenFetcher__Wrapper",componentId:"sc-1r3s1yl-0"})(["display:flex;flex-direction:column;align-items:center;"])),X=Object(s.b)(J).withConfig({displayName:"TokenFetcher__Puffer",componentId:"sc-1r3s1yl-1"})(["width:150px;height:150px;margin-top:100px;@media ","{width:9.375vw;height:9.375vw;margin-top:6.25vw;}"],x.cinema),K=s.b.span.withConfig({displayName:"TokenFetcher__Text",componentId:"sc-1r3s1yl-2"})(["color:",";font-size:28px;margin:0;margin-top:50px;text-align:center;@media ","{font-size:1.75vw;margin-top:3.125vw;}"],j,x.cinema),Q=function(e){var t=e.code;return Object(o.useEffect)((function(){setTimeout((function(){L(t).catch((function(e){return console.log("Something happened fetching the token :(",e)}))}),3e3)}),[]),Object(i.jsxs)(A,{children:[Object(i.jsx)(X,{}),Object(i.jsx)(K,{children:"Linking account..."})]})},V=n(5);!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(W||(W={}));var Y=s.b.div.withConfig({displayName:"MainScreen__Wrapper",componentId:"h1wrqg-0"})(["display:flex;flex-direction:column;align-items:center;"]),Z=Object(s.b)(J).withConfig({displayName:"MainScreen__Puffer",componentId:"h1wrqg-1"})(["width:150px;height:150px;margin-top:100px;@media ","{width:9.375vw;height:9.375vw;margin-top:6.25vw;}"],x.cinema),$=s.b.div.withConfig({displayName:"MainScreen__Circle",componentId:"h1wrqg-2"})(["height:300px;width:300px;margin-top:100px;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center;border:"," 5px solid;border-radius:50%;"],y),ee=s.b.span.withConfig({displayName:"MainScreen__Text",componentId:"h1wrqg-3"})(["color:",";font-size:28px;font-weight:bold;padding-left:",";padding-right:",";"],y,(function(e){return e.direction===W.LEFT&&"90px"}),(function(e){return e.direction===W.RIGHT&&"90px"})),te=s.b.div.withConfig({displayName:"MainScreen__Line",componentId:"h1wrqg-4"})(["position:absolute;height:80px;border-right:"," 5px solid;transform:skew(-45deg);"],y),ne=function(){var e=Object(o.useState)([]),t=Object(V.a)(e,2),n=t[0],r=t[1];Object(o.useEffect)((function(){setTimeout((function(){D().catch((function(e){return console.log("Something happened refreshing the token :(",e)})),q().then((function(e){return r(e)})).catch((function(e){return console.log("Something happened getting activities :(",e)}))}),1e3)}),[]),console.log("runData:",n);var c=n.reduce((function(e,t){return e+t.distance}),0)/10,a=Math.round(c+100*Number.EPSILON)/100;return Object(i.jsx)(Y,{children:(null===n||void 0===n?void 0:n.length)?Object(i.jsxs)($,{children:[Object(i.jsx)(ee,{direction:W.RIGHT,children:a}),Object(i.jsx)(te,{}),Object(i.jsx)(ee,{direction:W.LEFT,children:"1000"})]}):Object(i.jsx)(Z,{})})},re=function(){var e=new URLSearchParams(window.location.search).get("code");return localStorage.getItem(k)?Object(i.jsx)(ne,{}):e?Object(i.jsx)(Q,{code:e}):Object(i.jsx)(P,{})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))};function oe(){var e=Object(r.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap');\n\n  body {\n    margin: 0;\n    font-family: 'Poppins', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background-color: ",";\n  }\n"]);return oe=function(){return e},e}var ce=Object(s.a)(oe(),v);l.a.render(Object(i.jsxs)(c.a.StrictMode,{children:[Object(i.jsx)(ce,{}),Object(i.jsx)(re,{})]}),document.getElementById("root")),ie()}},[[26,1,2]]]);
//# sourceMappingURL=main.b2afbbf9.chunk.js.map